---
title: "The Banana Index Revisited"
author: Me
date: '2023-09-10'
slug: banana_index
categories:
  - data analysis
tags: [data analysis]
subtitle: ''
summary: ''
authors: []
lastmod: '2023-02-08T14:27:06Z'
featured: no
image:
  caption: 'created by DALLÂ·E'
  focal_point: ''
  preview_only: no
projects: []
draft: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=F, warning=F, message=F}
library(dplyr)
library(ggplot2)
library(ggrepel)
library(stringr)

bananaindex <- read.csv("~/Desktop/Website/content/post/banana_index/bananaindex.csv")
```

Recently, the [Economist](https://www.economist.com/graphic-detail/2023/04/11/a-different-way-to-measure-the-climate-impact-of-food) proposed the banana index as a way to compare the relative environmental impact of the foods. 

The banana index gives the greenhouse-gas emissions of foods by their equivalent in bananas. The banana was chosen as baseline due to its "middling climate impact and nutritional value". The idea of the index is that benchmarking emissions to a single food gives a sense of how different foods rank. 

For example, producing one kilogram of beef burger results in as many emissions as 61kg of bananas (this is a banana index of 61). This measures emissions by weight (i.e. emissions per kg), but we do the same for nutritional value (calories and protein content). For example, producing 1 calorie of beef burger causes 25 times as much emissions as 1 calorie of banana. As for protein, the score is 4. We get similar results, for other beef-derived foods. The bottom line: "beef is bad for the environment no matter how you slice it" and how you measure it!

The banana index relies on average emissions for a given food and "does not capture other environmental impacts, such as land use". Here, I revisit the data looking at land use in parallel to emissions. 

## The calculation
As mentioned, the index gives the emissions of foods by their equivalent in bananas. This is simply a ratio of emissions efficiency. For example, the production of 1 kg of a beef burger brings about 54 kilograms of CO2-equivalents. Bananas bring about 0.88 kilograms of CO2-equivalents. A burger's banana index, by weight, is therefore equal to 54/0.88, which is 61.

Here, I use the same methodology to calculate the banana index for land use. This is the land use of foods by their equivalent in bananas - a ratio of *land use efficiency*. I use the [same data source](https://github.com/TheEconomist/banana-index-data/) as the original article. 

## Banana index for land use

The index for 160 foods is plotted below. To improve visualisation is it on the natural logarithmic scale. This mean that 0 (vertical line) corresponds to a banana index of 1, the land needed to produce one kilo of bananas.

```{r, echo=F}
banana_index <- bananaindex %>% mutate(
   Bananas.index..100g_fat = emissions_100g_fat/20.46922,
   Bananas.index..land_use_kg = land_use_kg/2.639824,
   Bananas.index..land_use_1000kcal = land_use_1000kcal/2.717877,
   Bananas.index..land_use_100g_protein = Land.use.per.100.grams.of.protein/22.82123,
   Banana.index..land_use_100g_fat = Land.use.per.100.grams.of.fat/64.90734
)
```

```{r, echo=FALSE, warning=F}
set.seed(100)
dev <- rnorm(160, sd = 10)
banana_index %>% mutate(y = 0 + dev) %>%
   ggplot(., aes(x = log(Bananas.index..land_use_kg), y = y, label = entity, size = land_use_kg)) +
   geom_point() +
   ggtitle("Land use by weight") +
   #geom_jitter(position = postition_jitter(width = 0, height = 0.001)) +
   labs(x = "ln(Banana Index)", size = "Land use by kg", y = "") +
   geom_text_repel(size = 3.5) +
   geom_vline(xintercept = 0) +
   theme_classic() +
   theme(axis.text.y = element_blank(), 
         axis.ticks.y = element_blank())
```

Beef is not bad only in terms of emissions (see above) but also in terms of land use (by weight), with an index between 51 and 161, depending on the slice: 

```{r, echo=F}
banana_index %>% filter(str_detect(entity, "Beef")) %>% 
   select(entity,  Bananas.index..land_use_kg) %>%
   rename(BI_land_use_kg = Bananas.index..land_use_kg) %>%
   arrange(desc(BI_land_use_kg))
```

The results are similar if we calculate the index for nutritional values (calories and protein content):

```{r, echo=FALSE, warning=F}
set.seed(100)
dev <- rnorm(160, sd = 10)
banana_index %>% mutate(y = 0 + dev) %>%
   ggplot(., aes(x = log(Bananas.index..land_use_1000kcal), y = y, label = entity, size = land_use_1000kcal)) +
   geom_point() +
   ggtitle("Land use by calorie count") +
   #geom_jitter(position = postition_jitter(width = 0, height = 0.001)) +
   labs(x = "ln(Banana Index)", size = "Land use per kcal", y = "") +
   geom_text_repel(size = 3.5) +
   geom_vline(xintercept = 0) +
   theme_classic() +
   theme(axis.text.y = element_blank(), 
         axis.ticks.y = element_blank())
```

In terms of protein content Sugar has a large index (8.72)! This means 1g of sugar protein requires 8.7 times as much land as 1g of banana protein. This is probably because sugar has extremely low values of protein content to begin with. 

```{r, echo=FALSE, warning=F}
set.seed(100)
dev <- rnorm(160, sd = 10)
banana_index %>% mutate(y = 0 + dev) %>%
   ggplot(., aes(x = log(Bananas.index..land_use_100g_protein), y = y, label = entity, size = Land.use.per.100.grams.of.protein)) +
   geom_point() +
   ggtitle("Land use by protein content") +
   #geom_jitter(position = postition_jitter(width = 0, height = 0.001)) +
   labs(x = "ln(Banana Index)", size = "Land use by protein", y = "") +
   geom_text_repel(size = 3.5) +
   geom_vline(xintercept = 0) +
   theme_classic() +
   theme(axis.text.y = element_blank(), 
         axis.ticks.y = element_blank())

banana_index %>% filter(entity == "Sugar")
```

```{r, echo=F}
#set.seed(100)
#dev <- rnorm(160, sd = 10)
#banana_index %>% mutate(y = 0 + dev) %>%
#   ggplot(., aes(x = Bananas.index..land_use_100g_protein, y = y, label = entity, size = Land.use.per.100.grams.of.protein)) +
#   geom_point() +
#   ggtitle("Land use by protein content") +
#   #geom_jitter(position = postition_jitter(width = 0, height = 0.001)) +
#   labs(x = "ln(Banana Index)", size = "Land use by 100g protein", y = "") +
#   geom_text_repel(size = 3.5) +
#   geom_vline(xintercept = 1) +
#   theme_classic() +
#   theme(axis.text.y = element_blank(), 
#         axis.ticks.y = element_blank())

```

As when looking at [emissions](https://www.economist.com/graphic-detail/2023/04/11/a-different-way-to-measure-the-climate-impact-of-food), some foods out-emit bananas on one metric put them to shame on another. 


```{r}
banana_index %>% mutate(sd = sd(Bananas.index..land_use_kg:Bananas.index..land_use_100g_protein))

library(tidyr)

# The arguments to gather():
# - data: Data object
# - key: Name of new key column (made from names of data columns)
# - value: Name of new value column
# - ...: Names of source columns that contain values
# - factor_key: Treat the new key column as a factor (instead of character vector)
data_long <- gather(banana_index, index, measurement, Bananas.index..land_use_kg:Bananas.index..land_use_100g_protein, factor_key = TRUE) %>%
   group_by(entity) %>%
   mutate(min_index = min(measurement),
          max_index = max(measurement),
          diff = max_index - min_index) 

banana_index%>% filter(str_detect(entity, "Beef")) 

data_long %>% filter(str_detect(entity, "Beef")) %>% select(measurement, min_index, max_index, index)

ggplot() + 
   geom_point(data = data_long, aes(x = diff, y = entity)) +
   geom_text_repel(data = data_long %>% distinct(entity, .keep_all = T) %>% filter(diff > 20), aes(x = diff, y = entity, label = entity), size = 3.5)
   
```

```{r}
data_long2 <- gather(banana_index, index, measurement, Bananas.index..kg.:Bananas.index..100g.protein., factor_key = TRUE) %>%
   group_by(entity) %>%
   mutate(min_index = min(measurement),
          max_index = max(measurement),
          diff = max_index - min_index) 

data_long2 %>% filter(str_detect(entity, "Beef")) %>% select(measurement, min_index, max_index, index)

ggplot() + 
   geom_point(data = data_long2, aes(x = diff, y = entity)) +
   geom_text_repel(data = data_long2 %>% distinct(entity, .keep_all = T) %>% filter(diff > 20), aes(x = diff, y = entity, label = entity), size = 3.5)
```

